{% extends 'base.html' %}
{% block content %}

<h1>{{ artist.artist_name }}</h1>
  <img src="{{ artist.artist_photo }}"><br>
  {{ artist.artist_bio }}<br>

<a href="https://www.facebook.com/sharer.php?..." target="blank"><img src="/static/facebook-icon.png" alt="Share Page on Facebook" /></a>
<a href="https://twitter.com/intent/tweet?..." target="blank"><img src="/static/twitter-icon.png" alt="Share Page on Twitter" /></a>
<!-- NEED TO INSERT REST OF SEARCH QUERY -->

{% set youtube_query = artist.artist_name.replace(" ", "+") %}
<a href="https://www.youtube.com/results?search_query=music+{{ youtube_query }}" target="blank"><img src="/static/youtube-icon.png" alt="Watch now on YouTube" /></a>
  <!--  For Spotify player-->
  <!-- https://developer.spotify.com/documentation/widgets/generate/play-button/ -->
  <iframe src="https://open.spotify.com/embed/playlist/{{ playlist_id }}" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

  {% if artist_event_dicts|length > 0 %}
    <ul>
      {% for event in artist_event_dicts %}
        <li>
          {{ event[0].event_datetime }}
          <a href="/event/{{ event[0].event_id }}">
          {{ event[0].venue.venue_name }}</a>
           <br>
          <ul>
              {% for key in event[1] %}
              <li>
                <a href="/artist/{{ event[1][key].artist_id }}">
                  {{ event[1][key].artist_name }}</a>
                  {{ event[1][key].artist_genres }}<br>
              </li>
              {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    Sorry, no events for this artist.
  {% endif %}

<nav aria-label="...">
  <ul class="pagination pagination-sm">
    <li class="page-item disabled">
      <a class="page-link" href="#" tabindex="-1">1</a>
    </li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
  </ul>
</nav>

<script>
    // https://css-tricks.com/simple-social-sharing-links/
    function socialWindow(url) {
    var left = (screen.width - 570) / 2;
    var top = (screen.height - 570) / 2;
    var params = "menubar=no,toolbar=no,status=no,width=570,height=570,top=" + top + ",left=" + left;
    window.open(url,"NewWindow",params);
}

function setShareLinks() {
    var pageUrl = encodeURIComponent(document.URL);
    var tweet = encodeURIComponent(jQuery("meta[property='og:description']").attr("content"));
    
    jQuery(".social-share-facebook").on("click", function() {
        url = "https://www.facebook.com/sharer.php?u=" + pageUrl;
        socialWindow(url);
    });

    jQuery(".social-share-twitter").on("click", function() {
        url = "https://twitter.com/intent/tweet?url=" + pageUrl + "&text=" + tweet;
        socialWindow(url);
    });
}
</script>

{% endblock %}