<!doctype html>
<html lang="en">
<head>
    <!-- For Bootstrap -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- For jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

    </head>

<body>
    <!-- Navigation bar to display on every page -->
    <nav class="navbar sticky-top navbar-light bg-light">

        <span class="navbar-title">KnowShows</span><br>

        <form class="form-inline" action="/search" method="POST">

            <label for="searchType">Select</label>
            <select class="form-control" name="searchType" id="searchType">
            <option value="Artist">Artist</option>
            <option value="Venue">Venue</option>
            <option value="Event">Event</option>
            </select>

            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="userSearchInput" id="userSearchInput" required>

            <label for="userCityInput">City</label>
            <input type="text" class="form-control" name="userCityInput" id="userCityInput" placeholder="San Fran">

            <label for="form-control">State</label>
            <select class="form-control" name="state" id="state">
            <option value=""></option>
            <option value="CA">CA</option>
            <option value="NY">NY</option>
            <option value="WA">WA</option>
            </select>

            <button type="submit">Search</button>

        </form>

         

    </nav>

    <script type="text/javascript">
        
    </script>

    {% block content %}{% endblock %}

    <!-- For Google Maps API -->
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkptiAE4ZWb1gHEZjFGXB3MwyoaUWOmo0"></script>

    <!-- For Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>

            <!-- May want to keep list of genres as an option -->
<!--       <div class="form-group">
            <label for="genre">Genre</label>
                <select class="form-control" id="genre" name="genre">
                <option value="None"></option>
                <option value="Rock">Rock</option>
                <option value="Pop">Pop</option>
                <option value="Folk">Folk</option>
                </select>
      </div> -->

  <!--  <div>
                <button class="btn btn-sm btn-outline-secondary"id="loc-button">Find my location</button>
                <div id="output"></div>
            </div>
            <script>
                "use strict";
                    // declare pos here

                var pos;
                // From Google Maps JavaScript API
                // https://developers.google.com/maps/documentation/javascript/examples/map-geolocation
                $('#loc-button').click(function(){

                    if(navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position){
                        pos = {
                      lat: position.coords.latitude,
                      lng: position.coords.longitude
                    };
                        // https://stackoverflow.com/questions/14908864/how-can-i-use-data-posted-from-ajax-in-flask
                        // $.ajax({
                        //     type : "POST",
                        //     url : "{{url_for('index')}}",
                        //     data: JSON.stringify(pos),
                        //     contentType: 'application/json;charset=UTF-8',
                        //     success: function(result) {
                        //         console.log(result);
                        //         }});
                        //         console.log(pos);
                    var GEOCODING = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=' + position.coords.latitude + '%2C' + position.coords.longitude + '&language=en' + '&key=AIzaSyAkptiAE4ZWb1gHEZjFGXB3MwyoaUWOmo0';

                    $.getJSON(GEOCODING).done(function(location) {
                        console.log(location)
                        console.log(location.results[0].address_components[1].long_name)
                        console.log(location.results[0].address_components[0].long_name)
                        $('#state').html(location.results[0].address_components[4].long_name);
                        $('#userCityInput').html(location.results[0].address_components[2].long_name);
                    });})}
                    else {
                        console.log("geolocation is not supported");
                    }})
            </script> -->