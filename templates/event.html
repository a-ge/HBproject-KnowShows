{% extends 'base.html' %}
{% block content %}

<h2>{{ event.event_title }}</h2>
<h4>{{ event.event_datetime }}</h4><br>
{{ event.venue.venue_name }}<br>
{{ event.venue.venue_add }}<br>
{{ event.venue.venue_extend_add }}<br>


<a href="https://www.facebook.com/sharer.php?..." target="blank"><img src="/static/facebook-icon.png" alt="Share Page on Facebook" /></a>
<a href="https://twitter.com/intent/tweet?..." target="blank"><img src="/static/twitter-icon.png" alt="Share Page on Twitter" /></a>



<h5>Concert Lineup</h5>

    <ul>
        {% for key in event_dicts %}
        <li>
            <a href="/artist/{{ event_dicts[key].artist_id }}">
            {{ event_dicts[key].artist_name }}</a>
            {{ event_dicts[key].artist_genres }}<br>
            {{ event_dicts[key].artist_bio }}<br>
            <img src="{{ event_dicts[key].artist_photo }}">
        </li>
        <br>
        {% endfor %}
    </ul>

<!--  For Spotify player-->
<!-- https://developer.spotify.com/documentation/widgets/generate/play-button/ -->
<iframe src="https://open.spotify.com/embed/playlist/{{ playlist_id }}" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

<script>
    // https://css-tricks.com/simple-social-sharing-links/
    function socialWindow(url) {
    var left = (screen.width - 570) / 2;
    var top = (screen.height - 570) / 2;
    var params = "menubar=no,toolbar=no,status=no,width=570,height=570,top=" + top + ",left=" + left;
    window.open(url,"NewWindow",params);
}

function setShareLinks() {
    var pageUrl = encodeURIComponent(document.URL);
    var tweet = encodeURIComponent(jQuery("meta[property='og:description']").attr("content"));
    
    jQuery(".social-share-facebook").on("click", function() {
        url = "https://www.facebook.com/sharer.php?u=" + pageUrl;
        socialWindow(url);
    });

    jQuery(".social-share-twitter").on("click", function() {
        url = "https://twitter.com/intent/tweet?url=" + pageUrl + "&text=" + tweet;
        socialWindow(url);
    });
}
</script>

{% endblock %}